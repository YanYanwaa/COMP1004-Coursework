<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>
            VehicleSearch
        </title>
        <link rel="stylesheet" href="vehicle.css">
    </head>

    <body>
        <div id="container">
        <header>
            <nav>
                <h1>
                    Vehicle Search
                </h1>
                  <ul>
                     <a href="people_search.html">People search</a>
                     <a href="vehicle_search.html">Vehicle search</a>
                     <a href="add_vehicle.html">Add a vehicle</a>
                   </ul>
            </nav>
        </header>

        <main>
                <form>
                <p>Search registration number <input type="text" id="rego"> </p>
                <button type="button" onclick="submitQuery()" id="submit">Submit</button>
                <p id="message"></p>
                <p id="dataMessage"></p>
                
                </form>

                <script src="supabase.js" type="module"></script>
                <script type="module">
                    import{ fetchData } from './supabase.js';
                    
                    const submitButton = document.getElementById('submit');
                    const regoInput = document.getElementById('rego');
                    const message = document.getElementById('message');
                    const dataMessage = document.getElementById('This dataMessage');
                    submitButton.addEventListener('click', async () => {
                        const rego = regoInput.value.trim();
                        if(!rego)
                    {
                        message.textContent = "Error";
                        dataMessage.textContent = "";
                        return;
                    }
                    message.textContent = "Searching...";
                    const data = await fetchData(rego);
                    if(data.length === 0)
                    {
                        dataMessage.textContent = "No vehicle found.";

                    }
                    else
                    {
                        dataMessage.textContent = `Vehicle Make: ${data[0].VehicleID}`;
                    }
                    });
              
    
                </script>


        </main>

                

        <aside>
            <img src="yanma icon smile.png" alt="vehicle logo">
            
        </aside>

        <footer>
            <p>Comp 1004 Coursework Vehicle Footer</p>
        </footer>
        </div>
    </body>